# SSH Config for Mac (macbook-pro)
# Location: ~/.ssh/config

# Homelab - Smart routing: LAN first, Tailscale fallback
# Note: macOS nc -w doesn't timeout connections, use bash /dev/tcp with timeout
Match host homelab exec "bash -c 'exec 3<>/dev/tcp/192.168.1.100/22' 2>/dev/null & pid=$!; sleep 0.5; kill $pid 2>/dev/null && exit 1; wait $pid 2>/dev/null"
    HostName 192.168.1.100
    User nyaptor
    IdentityFile ~/.ssh/id_ed25519

Host homelab
    HostName homelab.tail296462.ts.net
    User nyaptor
    IdentityFile ~/.ssh/id_ed25519

# CloudPC via Tailscale
Host cloudpc
    HostName 100.83.148.5
    User leo
    IdentityFile ~/.ssh/id_ed25519

# Global settings
Host *
    SendEnv LANG LC_*
    SetEnv TERM=xterm-256color
    AddKeysToAgent yes
